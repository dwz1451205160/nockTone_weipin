<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>购物车页面</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/shop_car.css">
</head>

<body>
    <!-- 头部开始 -->
    <div id="header_wrapper">
        <div class="header content">
            <div class="shop_car_logo">
                <h1>
                    <a href="#" title="唯品会 - 全球精选 正品特卖">唯品会 - 全球精选 正品特卖</a>
                </h1>
            </div>
            <div class="header_right">
                <div class="header_right_top">
                    <div class="user_info">
                        <span>
                            你好,
                            <a href="#">尊敬的用户</a>
                            <a href="#" title="等级：银卡会员"></a>
                        </span>
                        <a href="#" class="quite">[退出]</a>
                        <a href="#" class="order_management">订单管理</a>
                    </div>
                    <span class="vertical_bar">|</span>
                    <div class="phone_num">
                        <i></i>
                        <span>400-6789-888</span>
                    </div>
                    <span class="vertical_bar">|</span>
                    <div class="customer_service">
                        <a href="#">
                            <i></i>
                            在线客服
                        </a>
                    </div>
                    <span class="vertical_bar">|</span>
                    <div class="members">
                        <a href="#" class="members_a">
                            <i></i>
                            会员服务
                            <span></span>
                        </a>
                        <div class="service_center">
                            <ul>
                                <li>
                                    <a href="#">
                                        <i></i>
                                        会员服务
                                        <span></span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">帮助中心</a>
                                </li>
                                <li>
                                    <a href="#">会员反馈</a>
                                </li>
                                <li>
                                    <a href="#">会员俱乐部</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>


                <ul class="ensure">
                    <li><i></i>100%正品保证</li>
                    <li><i></i>七天无理由放心退</li>
                    <li><i></i>限时抢购</li>
                </ul>
            </div>
        </div>
    </div>
    <!-- 头部结束 -->
    <!-- 主题内容开始 -->
    <div id="mainpart_wrapper">
        <div class="mainpart content">
            <div class="mainpart_top_wrapper">
                <div class="mainpart_top">
                    <div class="mainpart_top_left">

                    </div>
                    <div class="mainpart_top_right">
                        <h3>逛超时了，以下商品已被清空！</h3>
                        <p>赶紧一键抢回来~~
                            <i class="question_icon"></i>
                        </p>
                        <button class="yijian_btn">一键加入购物袋</button>
                    </div>
                </div>
            </div>


            <div class="mainpart_bottom">
                <div class="temai_clock">
                    <a href="#">
                        特卖商品
                        <span id="twenty_clock"></span>
                    </a>
                    <span class="shugang"></span>
                    <a href="#">
                        唯品医药
                    </a>
                </div>
                <div class="insert_box">

                </div>
                <div class="shopcar_table">
                    <table cellspacing="0" cellpadding="0">
                        <thead>
                            <tr>
                                <th class="selected_sale">精选特卖</th>
                                <th>单价</th>
                                <th>数量</th>
                                <th class="subtotal">小计</th>
                                <th class="operation">操作</th>
                            </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>

                    <div class="shopcar_table_bottom">
                        <span>运费</span>
                        <p>唯品自营：唯品自营商品已免运费</p>
                    </div>
                </div>

                <!-- <div class="peisong_address">
                    <span>配送至 北京</span>
                    <div style="display:inline-block">
                        <p style="display:inline-block">请在倒计时结束前提交订单，下单后你另有 30 分钟的支付时间。</p>
                        <span>此处是？</span>
                    </div>
                </div>
                <div class="shopcar_table">
                    <table>
                        <thead>
                            <tr>
                                <th>精选特卖</th>
                                <th>单价</th>
                                <th>数量</th>
                                <th>小计</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>
                                    69
                                </td>
                                <td>
                                    <button style="cursor: pointer">-</button>
                                    <span>1</span>
                                    <button style="cursor: pointer">+</button>
                                </td>
                                <td>4</td>
                                <td>删除</td>
                            </tr>
                        </tbody>
                    </table>
                </div> -->
            </div>

            
            <div class="discount_box">
                <div class="discount_box_youhuijuan">
                    <button id="favourable" class="css_btn">使用优惠券</button>
                </div>
                <div class="discount_box_zhedie">
                    <div class="discount_box_zhedie_content">
                        <div class="discount_box_icon"></div>
                        <div class="discount_box_right">
                            <p>没有可使用的优惠券，激活新优惠券</p>
                            <input type="text" name="" id="" placeholder="请输入激活码">
                            <span>激活并使用</span>
                        </div>
                    </div>
                </div>
                <div class="discount_box_youhuikouling discount_box_youhuijuan">
                    <button class="css_btn">使用优惠口令</button>
                </div>
                <div class="discount_box_settlement">
                    <span>请在倒计时结束前结算</span>
                    <i></i>
                    <button>立即结算</button>
                </div>
            </div>

            <div class="xx"></div>

        </div>
    </div>
    <!-- 主题内容结束 -->


    <!-- 需要引入的js部分 -->
   
    <!-- 配送地址和表格渲染js部分 -->
    <script src="js/shopcar_address.js"></script>
    <script>
        getAddress.init();
    </script>
     <!-- 购物车数据渲染/增删js部分 -->
     <script src="js/shop_car.js"></script>
     <script>
         shopCar.init();
     </script>
     <!-- 控制优惠券部分 -->
     <script src="js/shopcar_coupon.js"></script>
     <script>
         shopCoupon.init()
     </script>
    <!-- 倒计时控制页面部分 -->
    <script src="js/twenty_clock.js"></script>
    <script src="js/shop_park.js"></script>
    <script>
        var $discountBox =document.querySelector('.discount_box')
        var $subtotal = document.querySelector('.subtotal');
        var $selectedSale = document.querySelector('.selected_sale');
        var $shopPark = document.querySelector('.mainpart_top_wrapper');
        var $clock = document.querySelector('#twenty_clock');
        var $insertBox = document.querySelector('.insert_box');
        var $shopCarTbody = document.querySelector('tbody');
        var $operation = document.querySelector('.operation');
        var data = JSON.parse(localStorage.shopList);
        if (data != []) {
            getTwentyClock(data[data.length - 1].time, $clock)
                // 倒计时结束
                .then(str => {
                    if (str == 'jieshu') {
                        $insertBox.innerHTML = '';
                        $shopCarTbody.innerHTML = '';
                        $discountBox.innerHTML = '';
                        $shopPark.style.display = 'block';
                        $operation.style.display = 'none';
                        $subtotal.style.borderRight = '1px solid #e0e0e0';
                        $selectedSale.style.width = '600px';
                        shopPark.init();
                    }
                })
                //再次添加购物车
                .then(_ => {
                    
                    var $yiJian = document.querySelector('.yijian_btn');
                    $yiJian.onclick = function() {
                        $insertBox.innerHTML = '';
                        $shopPark.style.display = 'none';
                        shopCar.insertData(JSON.parse(localStorage.shopList));
                        getTwentyClock(data[data.length - 1].time, $clock);
                        getAddress.init();
                        $operation.style.display = 'block';
                        window.location.reload();
                    }
                })
        }

        console.log('888')
    </script>
</body>

</html>